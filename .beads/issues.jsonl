{"id":"pokedex-053","title":"Tests: Update all tests for new schema","description":"Update 43 existing tests for 3-table schema. Files: test_db.py, test_analyzer.py, test_config.py. Add new tests for upsert, JOINs, cascades.","status":"closed","priority":1,"issue_type":"task","owner":"3120297+cloonix@users.noreply.github.com","estimated_minutes":180,"created_at":"2026-01-26T12:14:20.56801102+01:00","created_by":"Claus Malter","updated_at":"2026-01-26T14:35:05.234443567+01:00","closed_at":"2026-01-26T14:35:05.234443567+01:00","close_reason":"Closed","labels":["tests","v2"],"dependencies":[{"issue_id":"pokedex-053","depends_on_id":"pokedex-w5l","type":"blocks","created_at":"2026-01-26T12:14:20.613750558+01:00","created_by":"Claus Malter"},{"issue_id":"pokedex-053","depends_on_id":"pokedex-82y","type":"blocks","created_at":"2026-01-26T12:14:20.661056721+01:00","created_by":"Claus Malter"},{"issue_id":"pokedex-053","depends_on_id":"pokedex-fvn","type":"blocks","created_at":"2026-01-26T12:14:20.709206291+01:00","created_by":"Claus Malter"},{"issue_id":"pokedex-053","depends_on_id":"pokedex-o5w","type":"blocks","created_at":"2026-01-26T12:14:20.761306141+01:00","created_by":"Claus Malter"},{"issue_id":"pokedex-053","depends_on_id":"pokedex-f44","type":"blocks","created_at":"2026-01-26T12:14:20.805457279+01:00","created_by":"Claus Malter"}]}
{"id":"pokedex-123","title":"Config: Remove JSON file storage logic","description":"- **Type**: task","status":"tombstone","priority":2,"issue_type":"task","created_at":"2026-01-26T12:10:37.788092045+01:00","updated_at":"2026-01-26T12:12:07.229265466+01:00","deleted_at":"2026-01-26T12:12:07.229265466+01:00","deleted_by":"batch delete","delete_reason":"batch delete","original_type":"task"}
{"id":"pokedex-1he","title":"Add setup command for configurable database path","status":"closed","priority":0,"issue_type":"feature","owner":"3120297+cloonix@users.noreply.github.com","created_at":"2026-01-25T13:40:56.511272934+01:00","created_by":"Claus Malter","updated_at":"2026-01-25T13:45:50.790050253+01:00","closed_at":"2026-01-25T13:45:50.790050253+01:00","close_reason":"Setup command implemented with OS-specific config paths, backups subdirectory support, and full test coverage (24/24 tests passing)"}
{"id":"pokedex-1lc","title":"Design: Document new database schema for Option B","description":"Create detailed docs for 3-table schema (cards, card_names, owned_cards). Include SQL, indexes, examples. File: docs/schema_v2.md","status":"closed","priority":0,"issue_type":"task","owner":"3120297+cloonix@users.noreply.github.com","estimated_minutes":30,"created_at":"2026-01-26T12:13:46.181140331+01:00","created_by":"Claus Malter","updated_at":"2026-01-26T12:17:44.892721588+01:00","closed_at":"2026-01-26T12:17:44.892721588+01:00","close_reason":"Closed","labels":["design","documentation","v2"]}
{"id":"pokedex-1n8","title":"Remove deprecated v1 compatibility functions","description":"Remove v1 functions: add_card_variant(), remove_card_variant(), get_owned_cards(), etc. (lines 606-792, 900-956). Verify v1 migration complete first. File: src/db.py","status":"closed","priority":2,"issue_type":"chore","owner":"3120297+cloonix@users.noreply.github.com","estimated_minutes":30,"created_at":"2026-01-26T15:54:31.419719179+01:00","created_by":"Claus Malter","updated_at":"2026-01-26T17:19:45.400617792+01:00","closed_at":"2026-01-26T17:19:45.400617792+01:00","close_reason":"Closed","labels":["cleanup","easy"]}
{"id":"pokedex-1qr","title":"Commands: Update 'stats' to use new schema","description":"- **Type**: task  ","status":"tombstone","priority":2,"issue_type":"task","created_at":"2026-01-26T12:10:37.775458702+01:00","updated_at":"2026-01-26T12:12:07.268047412+01:00","deleted_at":"2026-01-26T12:12:07.268047412+01:00","deleted_by":"batch delete","delete_reason":"batch delete","original_type":"task"}
{"id":"pokedex-1x9","title":"Phase 4: Command Updates (Depends on DB Helpers)","status":"tombstone","priority":2,"issue_type":"task","created_at":"2026-01-26T12:13:28.486747606+01:00","updated_at":"2026-01-26T12:13:46.137882838+01:00","deleted_at":"2026-01-26T12:13:46.137882838+01:00","deleted_by":"batch delete","delete_reason":"batch delete","original_type":"task"}
{"id":"pokedex-204","title":"Replace bare except with specific exceptions","description":"Bare except: blocks silently swallow errors (api.py lines 69-71, 111-113, 149-163). Use specific exception types. File: src/api.py","status":"closed","priority":2,"issue_type":"task","owner":"3120297+cloonix@users.noreply.github.com","estimated_minutes":30,"created_at":"2026-01-26T15:54:41.867354996+01:00","created_by":"Claus Malter","updated_at":"2026-01-26T17:17:43.356465912+01:00","closed_at":"2026-01-26T17:17:43.356465912+01:00","close_reason":"Closed","labels":["easy","quality"]}
{"id":"pokedex-2aw","title":"Commands: Update 'add' to use new schema","description":"- **Type**: task","status":"tombstone","priority":0,"issue_type":"task","created_at":"2026-01-26T12:10:37.729949867+01:00","updated_at":"2026-01-26T12:12:06.779865488+01:00","deleted_at":"2026-01-26T12:12:06.779865488+01:00","deleted_by":"batch delete","delete_reason":"batch delete","original_type":"task"}
{"id":"pokedex-2eh","title":"Config: Remove JSON file storage logic","description":"Remove save_raw_card_data(), load_raw_card_data(), get_raw_data_path(). File: src/config.py","status":"closed","priority":2,"issue_type":"task","owner":"3120297+cloonix@users.noreply.github.com","estimated_minutes":60,"created_at":"2026-01-26T12:14:04.388692648+01:00","created_by":"Claus Malter","updated_at":"2026-01-26T14:20:44.068761333+01:00","closed_at":"2026-01-26T14:20:44.068761333+01:00","close_reason":"Closed","labels":["cleanup","config","v2"],"dependencies":[{"issue_id":"pokedex-2eh","depends_on_id":"pokedex-w5l","type":"blocks","created_at":"2026-01-26T12:14:04.440434858+01:00","created_by":"Claus Malter"},{"issue_id":"pokedex-2eh","depends_on_id":"pokedex-82y","type":"blocks","created_at":"2026-01-26T12:14:04.485154343+01:00","created_by":"Claus Malter"},{"issue_id":"pokedex-2eh","depends_on_id":"pokedex-fvn","type":"blocks","created_at":"2026-01-26T12:14:04.529246666+01:00","created_by":"Claus Malter"}]}
{"id":"pokedex-2qr","title":"Phase 5: Cleanup (Depends on Commands)","status":"tombstone","priority":2,"issue_type":"task","created_at":"2026-01-26T12:13:28.489831319+01:00","updated_at":"2026-01-26T12:13:46.137882838+01:00","deleted_at":"2026-01-26T12:13:46.137882838+01:00","deleted_by":"batch delete","delete_reason":"batch delete","original_type":"task"}
{"id":"pokedex-30g","title":"Extract tcgdex_id utility functions","description":"Create build_tcgdex_id() and consolidate parse logic. Pattern appears 5+ times across cli.py, db.py, migrate_v2.py. Files: multiple","status":"closed","priority":2,"issue_type":"chore","owner":"3120297+cloonix@users.noreply.github.com","estimated_minutes":15,"created_at":"2026-01-26T15:54:36.059175796+01:00","created_by":"Claus Malter","updated_at":"2026-01-26T17:04:33.96441693+01:00","closed_at":"2026-01-26T17:04:33.96441693+01:00","close_reason":"Closed","labels":["refactor","trivial"]}
{"id":"pokedex-35e","title":"Tests: Add tests for sync command","description":"Test sync: single card, stale filter, price changes, API failures. File: tests/test_sync.py (new)","status":"closed","priority":3,"issue_type":"task","owner":"3120297+cloonix@users.noreply.github.com","estimated_minutes":90,"created_at":"2026-01-26T12:14:20.846007391+01:00","created_by":"Claus Malter","updated_at":"2026-01-26T17:43:19.236652055+01:00","closed_at":"2026-01-26T17:43:19.236652055+01:00","close_reason":"Deferred to future work - not part of current refactoring scope","labels":["sync","tests","v2"],"dependencies":[{"issue_id":"pokedex-35e","depends_on_id":"pokedex-r60","type":"blocks","created_at":"2026-01-26T12:14:20.887053345+01:00","created_by":"Claus Malter"}]}
{"id":"pokedex-366","title":"Commands: Implement new 'sync' command","description":"- **Type**: task","status":"tombstone","priority":1,"issue_type":"task","created_at":"2026-01-26T12:10:37.780959894+01:00","updated_at":"2026-01-26T12:12:06.975555106+01:00","deleted_at":"2026-01-26T12:12:06.975555106+01:00","deleted_by":"batch delete","delete_reason":"batch delete","original_type":"task"}
{"id":"pokedex-39x","title":"Commands: Add 'migrate' command for users","description":"User command: pkm migrate [--dry-run] [--backup]. Progress bar, validation, rollback. File: src/cli.py","status":"closed","priority":1,"issue_type":"task","owner":"3120297+cloonix@users.noreply.github.com","estimated_minutes":60,"created_at":"2026-01-26T12:14:04.305257306+01:00","created_by":"Claus Malter","updated_at":"2026-01-26T14:16:30.104171868+01:00","closed_at":"2026-01-26T14:16:30.104171868+01:00","close_reason":"Already implemented in commit 92796c1","labels":["commands","migration","v2"],"dependencies":[{"issue_id":"pokedex-39x","depends_on_id":"pokedex-4yb","type":"blocks","created_at":"2026-01-26T12:14:04.347541554+01:00","created_by":"Claus Malter"}]}
{"id":"pokedex-3ad","title":"Standardize error messages across api.py","description":"Create constant error message templates. Fix inconsistent command references (poke vs pkm). Locations: lines 109, 135, 181, 219.","status":"closed","priority":2,"issue_type":"task","owner":"3120297+cloonix@users.noreply.github.com","created_at":"2026-01-26T17:52:32.292623536+01:00","created_by":"Claus Malter","updated_at":"2026-01-26T18:07:13.073369764+01:00","closed_at":"2026-01-26T18:07:13.073369764+01:00","close_reason":"Closed","labels":["refactor","ux"]}
{"id":"pokedex-3fo","title":"Add --all flag to rm command","description":"Allow users to remove all variants of a card at once with 'pkm rm --all lang:set:card'","status":"closed","priority":1,"issue_type":"feature","owner":"3120297+cloonix@users.noreply.github.com","created_at":"2026-01-25T13:30:26.351540872+01:00","created_by":"Claus Malter","updated_at":"2026-01-25T13:30:31.138240628+01:00","closed_at":"2026-01-25T13:30:31.138240628+01:00","close_reason":"Successfully implemented --all flag for rm command. Users can now remove all variants of a card with 'pkm rm --all de:me01:001'. Test coverage added."}
{"id":"pokedex-3qp","title":"Phase 3: Database Helpers (Depends on Schema Implementation)","status":"tombstone","priority":2,"issue_type":"task","created_at":"2026-01-26T12:13:28.484496733+01:00","updated_at":"2026-01-26T12:13:46.137882838+01:00","deleted_at":"2026-01-26T12:13:46.137882838+01:00","deleted_by":"batch delete","delete_reason":"batch delete","original_type":"task"}
{"id":"pokedex-4cr","title":"Tests: Add tests for migration script","description":"- **Type**: task","status":"tombstone","priority":2,"issue_type":"task","created_at":"2026-01-26T12:10:37.807542266+01:00","updated_at":"2026-01-26T12:12:07.119345817+01:00","deleted_at":"2026-01-26T12:12:07.119345817+01:00","deleted_by":"batch delete","delete_reason":"batch delete","original_type":"task"}
{"id":"pokedex-4hg","title":"Database: Implement new schema in db.py","description":"Implement 3-table schema from design docs. Update CREATE_SCHEMA with cards, card_names, owned_cards tables + indexes. File: src/db.py","status":"closed","priority":0,"issue_type":"task","owner":"3120297+cloonix@users.noreply.github.com","estimated_minutes":120,"created_at":"2026-01-26T12:13:46.268267484+01:00","created_by":"Claus Malter","updated_at":"2026-01-26T12:18:48.385052842+01:00","closed_at":"2026-01-26T12:18:48.385052842+01:00","close_reason":"Closed","labels":["database","schema","v2"],"dependencies":[{"issue_id":"pokedex-4hg","depends_on_id":"pokedex-1lc","type":"blocks","created_at":"2026-01-26T12:13:46.310597186+01:00","created_by":"Claus Malter"}]}
{"id":"pokedex-4q5","title":"Fix N+1 query problem in analyzer","description":"load_card_with_ownership calls get_owned_cards() for every card, loading all cards 500+ times. Replace with direct lookup function get_card_ownership(tcgdex_id, language). Performance impact: 100-1000x faster for large collections.","status":"closed","priority":1,"issue_type":"task","owner":"3120297+cloonix@users.noreply.github.com","created_at":"2026-01-25T22:37:27.721121728+01:00","created_by":"Claus Malter","updated_at":"2026-01-25T22:38:29.587976051+01:00","closed_at":"2026-01-25T22:38:29.587976051+01:00","close_reason":"Closed"}
{"id":"pokedex-4yb","title":"Database: Create migration script for v2 schema","description":"Migrate v1â†’v2: old tables+JSON to new 3-table schema. Includes dry-run, rollback, progress bar. File: src/migrate_v2.py","status":"closed","priority":1,"issue_type":"task","owner":"3120297+cloonix@users.noreply.github.com","estimated_minutes":90,"created_at":"2026-01-26T12:13:46.349012138+01:00","created_by":"Claus Malter","updated_at":"2026-01-26T14:16:18.622902611+01:00","closed_at":"2026-01-26T14:16:18.622902611+01:00","close_reason":"Closed","labels":["database","migration","v2"],"dependencies":[{"issue_id":"pokedex-4yb","depends_on_id":"pokedex-1lc","type":"blocks","created_at":"2026-01-26T12:13:46.395083557+01:00","created_by":"Claus Malter"}]}
{"id":"pokedex-578","title":"Remove duplicate code blocks in handle_setup()","description":"Lines 857-863 and 910-916 are identical (reset config logic). Lines 881-892 and 918-929 are duplicated (path setup). Remove duplicate blocks. File: src/cli.py","status":"closed","priority":1,"issue_type":"chore","owner":"3120297+cloonix@users.noreply.github.com","estimated_minutes":15,"created_at":"2026-01-26T15:54:26.7025233+01:00","created_by":"Claus Malter","updated_at":"2026-01-26T15:55:28.728687313+01:00","closed_at":"2026-01-26T15:55:28.728687313+01:00","close_reason":"Closed","labels":["cleanup","trivial"]}
{"id":"pokedex-7cg","title":"Database: Implement new schema in db.py","description":"- **Type**: task","status":"tombstone","priority":0,"issue_type":"task","created_at":"2026-01-26T12:10:37.718184428+01:00","updated_at":"2026-01-26T12:12:06.860457589+01:00","deleted_at":"2026-01-26T12:12:06.860457589+01:00","deleted_by":"batch delete","delete_reason":"batch delete","original_type":"task"}
{"id":"pokedex-82y","title":"Commands: Update 'list' to query new schema","description":"Query DB instead of JSON files. Use get_owned_cards() with JOIN. Keep same output format. File: src/cli.py","status":"closed","priority":0,"issue_type":"task","owner":"3120297+cloonix@users.noreply.github.com","estimated_minutes":60,"created_at":"2026-01-26T12:14:03.836147029+01:00","created_by":"Claus Malter","updated_at":"2026-01-26T12:25:20.619445051+01:00","closed_at":"2026-01-26T12:25:20.619445051+01:00","close_reason":"Closed","labels":["commands","list","v2"],"dependencies":[{"issue_id":"pokedex-82y","depends_on_id":"pokedex-e4d","type":"blocks","created_at":"2026-01-26T12:14:03.879483865+01:00","created_by":"Claus Malter"}]}
{"id":"pokedex-8jt","title":"Fix dead code and orphaned statements in api.py","description":"Remove unused _fetch_english_rarity() method (lines 29-60) and fix orphaned self.language statement (line 60). Extract proper helper method for English rarity fetching.","status":"closed","priority":1,"issue_type":"task","owner":"3120297+cloonix@users.noreply.github.com","created_at":"2026-01-26T17:52:24.643347934+01:00","created_by":"Claus Malter","updated_at":"2026-01-26T18:00:19.951013313+01:00","closed_at":"2026-01-26T18:00:19.951013313+01:00","close_reason":"Fixed in pokedex-9ze: _fetch_english_rarity() is now properly used (not dead code), orphaned statements removed","labels":["bug","refactor"],"dependencies":[{"issue_id":"pokedex-8jt","depends_on_id":"pokedex-9ze","type":"blocks","created_at":"2026-01-26T17:52:54.401355534+01:00","created_by":"Claus Malter"}]}
{"id":"pokedex-8sq","title":"Fix image URLs to use high quality PNG format","status":"closed","priority":1,"issue_type":"bug","owner":"3120297+cloonix@users.noreply.github.com","created_at":"2026-01-25T13:56:17.524441863+01:00","created_by":"Claus Malter","updated_at":"2026-01-25T13:57:32.052956435+01:00","closed_at":"2026-01-25T13:57:32.052956435+01:00","close_reason":"Image URLs now use high quality PNG format (/high.png suffix). Tested with German and English cards."}
{"id":"pokedex-8tq","title":"Commands: Update 'rm' to work with new schema","description":"- **Type**: task","status":"tombstone","priority":2,"issue_type":"task","created_at":"2026-01-26T12:10:37.76925447+01:00","updated_at":"2026-01-26T12:12:07.308238117+01:00","deleted_at":"2026-01-26T12:12:07.308238117+01:00","deleted_by":"batch delete","delete_reason":"batch delete","original_type":"task"}
{"id":"pokedex-8uy","title":"Tests: Add tests for sync command","description":"- **Type**: task","status":"tombstone","priority":2,"issue_type":"task","created_at":"2026-01-26T12:10:37.801479641+01:00","updated_at":"2026-01-26T12:12:07.155681833+01:00","deleted_at":"2026-01-26T12:12:07.155681833+01:00","deleted_by":"batch delete","delete_reason":"batch delete","original_type":"task"}
{"id":"pokedex-9jc","title":"Docs: Update README.md with sync command","description":"Document sync command in README: usage examples, weekly sync workflow, cron setup. File: README.md","status":"closed","priority":2,"issue_type":"task","owner":"3120297+cloonix@users.noreply.github.com","estimated_minutes":30,"created_at":"2026-01-26T12:14:21.139408956+01:00","created_by":"Claus Malter","updated_at":"2026-01-26T14:24:31.007648392+01:00","closed_at":"2026-01-26T14:24:31.007648392+01:00","close_reason":"Closed","labels":["documentation","sync","v2"],"dependencies":[{"issue_id":"pokedex-9jc","depends_on_id":"pokedex-r60","type":"blocks","created_at":"2026-01-26T12:14:21.184522351+01:00","created_by":"Claus Malter"}]}
{"id":"pokedex-9ze","title":"Eliminate duplicate English rarity fetching logic","description":"English rarity fetching code is duplicated in get_card() and get_card_by_id(). Use extracted helper method consistently across both functions.","status":"closed","priority":1,"issue_type":"task","owner":"3120297+cloonix@users.noreply.github.com","created_at":"2026-01-26T17:52:28.41717593+01:00","created_by":"Claus Malter","updated_at":"2026-01-26T18:00:08.825658148+01:00","closed_at":"2026-01-26T18:00:08.825658148+01:00","close_reason":"Closed","labels":["refactor"]}
{"id":"pokedex-a3x","title":"Extract extract_extra_fields() helper function","description":"Duplicate field extraction logic (stage, category from raw API) in cli.py lines 147-156 and 676-686.","status":"closed","priority":3,"issue_type":"task","owner":"3120297+cloonix@users.noreply.github.com","created_at":"2026-01-26T17:52:51.256372087+01:00","created_by":"Claus Malter","updated_at":"2026-01-26T18:04:20.929394623+01:00","closed_at":"2026-01-26T18:04:20.929394623+01:00","close_reason":"Solved by pokedex-bi6: extract_extra_fields() helper added","labels":["refactor"]}
{"id":"pokedex-aa6","title":"Add language filtering to pkm list command","description":"Users should be able to filter their collection by language (e.g., pkm list de, pkm list en). Requires adding language column to database and updating list command.","status":"closed","priority":0,"issue_type":"feature","owner":"3120297+cloonix@users.noreply.github.com","created_at":"2026-01-25T13:21:33.397400496+01:00","created_by":"Claus Malter","updated_at":"2026-01-25T13:26:02.490886829+01:00","closed_at":"2026-01-25T13:26:02.490886829+01:00","close_reason":"Successfully implemented language filtering for pkm list command. Users can now filter by language (e.g., pkm list de, pkm list en) and cards display their language in the list view."}
{"id":"pokedex-aol","title":"Add export/import functionality for database backup","description":"Export collection to JSON with timestamp filename, import to replace database","status":"closed","priority":0,"issue_type":"feature","owner":"3120297+cloonix@users.noreply.github.com","created_at":"2026-01-25T13:33:30.160125021+01:00","created_by":"Claus Malter","updated_at":"2026-01-25T13:37:06.758594332+01:00","closed_at":"2026-01-25T13:37:06.758594332+01:00","close_reason":"Export/import functionality complete and tested. Added export/import commands with timestamped backups, custom filenames, confirmation prompts, and proper error handling. All tests passing (13/13)."}
{"id":"pokedex-auk","title":"Tests: Add tests for migration script","description":"Test migration: empty DB, single card, multi-language, rollback, data integrity. File: tests/test_migrate.py (new)","status":"closed","priority":3,"issue_type":"task","owner":"3120297+cloonix@users.noreply.github.com","estimated_minutes":90,"created_at":"2026-01-26T12:14:20.930078409+01:00","created_by":"Claus Malter","updated_at":"2026-01-26T17:43:19.938612745+01:00","closed_at":"2026-01-26T17:43:19.938612745+01:00","close_reason":"Deferred to future work - not part of current refactoring scope","labels":["migration","tests","v2"],"dependencies":[{"issue_id":"pokedex-auk","depends_on_id":"pokedex-4yb","type":"blocks","created_at":"2026-01-26T12:14:20.972384907+01:00","created_by":"Claus Malter"}]}
{"id":"pokedex-ay5","title":"Remove v1 migration functionality","description":"Remove migrate command and all v1 migration code. Database is fully migrated to v2, no more v1 users exist.","status":"in_progress","priority":2,"issue_type":"task","owner":"3120297+cloonix@users.noreply.github.com","created_at":"2026-01-26T18:12:53.7859589+01:00","created_by":"Claus Malter","updated_at":"2026-01-26T18:12:57.112688142+01:00","labels":["cleanup"]}
{"id":"pokedex-bi6","title":"Refactor handle_add() into smaller functions","description":"handle_add() is 117 lines doing 8+ things. Extract: fetch_and_store_card_metadata(), validate_variant_or_prompt(), update_card_ownership(), display_add_result().","status":"closed","priority":1,"issue_type":"task","owner":"3120297+cloonix@users.noreply.github.com","created_at":"2026-01-26T17:52:40.323171275+01:00","created_by":"Claus Malter","updated_at":"2026-01-26T18:04:20.892999779+01:00","closed_at":"2026-01-26T18:04:20.892999779+01:00","close_reason":"Closed","labels":["refactor"]}
{"id":"pokedex-blu","title":"Phase 6: Testing (Depends on Implementation)","status":"tombstone","priority":2,"issue_type":"task","created_at":"2026-01-26T12:13:28.493623919+01:00","updated_at":"2026-01-26T12:13:46.137882838+01:00","deleted_at":"2026-01-26T12:13:46.137882838+01:00","deleted_by":"batch delete","delete_reason":"batch delete","original_type":"task"}
{"id":"pokedex-btj","title":"Optimize statistics calculation to single loop","description":"get_collection_statistics uses 6 separate loops over cards list. Refactor to single loop collecting all stats at once. Performance: 6x fewer iterations.","status":"closed","priority":2,"issue_type":"task","owner":"3120297+cloonix@users.noreply.github.com","created_at":"2026-01-25T22:37:31.976537998+01:00","created_by":"Claus Malter","updated_at":"2026-01-25T22:40:14.320823444+01:00","closed_at":"2026-01-25T22:40:14.320823444+01:00","close_reason":"Closed"}
{"id":"pokedex-cfw","title":"Fix duplicate JSON loading in analyze_collection","description":"analyze_collection loads the same raw JSON file twice: once in load_card_with_ownership (line 55) and again on line 113. Solution: return raw_data from load_card_with_ownership or add to CardAnalysis. Performance: 2x faster analyzer.","status":"closed","priority":1,"issue_type":"task","owner":"3120297+cloonix@users.noreply.github.com","created_at":"2026-01-25T22:37:30.159721371+01:00","created_by":"Claus Malter","updated_at":"2026-01-25T22:39:33.862672649+01:00","closed_at":"2026-01-25T22:39:33.862672649+01:00","close_reason":"Closed"}
{"id":"pokedex-cr2","title":"Database: Create migration script for v2 schema","description":"- **Type**: task","status":"tombstone","priority":1,"issue_type":"task","created_at":"2026-01-26T12:10:37.713412038+01:00","updated_at":"2026-01-26T12:12:07.009447803+01:00","deleted_at":"2026-01-26T12:12:07.009447803+01:00","deleted_by":"batch delete","delete_reason":"batch delete","original_type":"task"}
{"id":"pokedex-dl4","title":"API: Add support for configurable base URL","description":"- **Type**: task","status":"tombstone","priority":2,"issue_type":"task","created_at":"2026-01-26T12:10:37.724548668+01:00","updated_at":"2026-01-26T12:12:07.384962866+01:00","deleted_at":"2026-01-26T12:12:07.384962866+01:00","deleted_by":"batch delete","delete_reason":"batch delete","original_type":"task"}
{"id":"pokedex-dzq","title":"Fix v1 compatibility queries to use v2 tables","description":"get_owned_card_ids() queries 'cards' instead of 'owned_cards'. Fix all v1 compat functions to use v2 schema. File: src/db.py, line 745+","status":"closed","priority":1,"issue_type":"bug","owner":"3120297+cloonix@users.noreply.github.com","estimated_minutes":45,"created_at":"2026-01-26T15:54:33.591632546+01:00","created_by":"Claus Malter","updated_at":"2026-01-26T17:20:28.115079252+01:00","closed_at":"2026-01-26T17:20:28.115079252+01:00","close_reason":"Already fixed - v1 compatibility functions were removed in pokedex-1n8","labels":["bugfix","medium"]}
{"id":"pokedex-e4d","title":"Database: Add helper functions for new tables","description":"CRUD functions for all 3 tables: upsert_card, get_card, add_owned_card, etc. File: src/db.py. Includes unit tests.","status":"closed","priority":0,"issue_type":"task","owner":"3120297+cloonix@users.noreply.github.com","estimated_minutes":120,"created_at":"2026-01-26T12:13:46.438049156+01:00","created_by":"Claus Malter","updated_at":"2026-01-26T12:23:02.719313892+01:00","closed_at":"2026-01-26T12:23:02.719313892+01:00","close_reason":"Closed","labels":["database","helpers","v2"],"dependencies":[{"issue_id":"pokedex-e4d","depends_on_id":"pokedex-4hg","type":"blocks","created_at":"2026-01-26T12:13:46.481204644+01:00","created_by":"Claus Malter"}]}
{"id":"pokedex-e4j","title":"Extract VALID_VARIANTS constant to models.py","description":"Variant list ['normal', 'reverse', 'holo', 'firstEdition'] is hardcoded in 3+ locations. Create VALID_VARIANTS constant and validate_variant() function in models.py.","status":"closed","priority":2,"issue_type":"task","owner":"3120297+cloonix@users.noreply.github.com","created_at":"2026-01-26T17:52:35.977338207+01:00","created_by":"Claus Malter","updated_at":"2026-01-26T17:59:13.294170212+01:00","closed_at":"2026-01-26T17:59:13.294170212+01:00","close_reason":"Closed","labels":["refactor"]}
{"id":"pokedex-e6x","title":"Commands: Add 'migrate' command for users","description":"- **Type**: task","status":"tombstone","priority":1,"issue_type":"task","created_at":"2026-01-26T12:10:37.792044993+01:00","updated_at":"2026-01-26T12:12:06.939240046+01:00","deleted_at":"2026-01-26T12:12:06.939240046+01:00","deleted_by":"batch delete","delete_reason":"batch delete","original_type":"task"}
{"id":"pokedex-e71","title":"API: Add support for configurable base URL","description":"Enable private API (homer.tail150adf.ts.net:3443). Add api_base_url to config, check TCGDEX_API_URL env var. Files: src/api.py, src/config.py","status":"closed","priority":2,"issue_type":"task","owner":"3120297+cloonix@users.noreply.github.com","estimated_minutes":45,"created_at":"2026-01-26T12:13:46.223543633+01:00","created_by":"Claus Malter","updated_at":"2026-01-26T14:22:11.530875541+01:00","closed_at":"2026-01-26T14:22:11.530875541+01:00","close_reason":"Closed","labels":["api","configuration"]}
{"id":"pokedex-f44","title":"Commands: Update 'stats' to use new schema","description":"Update stats queries. Add collection value, avg price, most valuable card. File: src/cli.py","status":"closed","priority":2,"issue_type":"task","owner":"3120297+cloonix@users.noreply.github.com","estimated_minutes":30,"created_at":"2026-01-26T12:14:04.136292048+01:00","created_by":"Claus Malter","updated_at":"2026-01-26T12:27:07.074095138+01:00","closed_at":"2026-01-26T12:27:07.074095138+01:00","close_reason":"Closed","labels":["commands","stats","v2"],"dependencies":[{"issue_id":"pokedex-f44","depends_on_id":"pokedex-e4d","type":"blocks","created_at":"2026-01-26T12:14:04.178304835+01:00","created_by":"Claus Malter"}]}
{"id":"pokedex-f8z","title":"Fix wrapper script to find uv in common locations","status":"closed","priority":0,"issue_type":"bug","owner":"3120297+cloonix@users.noreply.github.com","created_at":"2026-01-25T14:01:37.636177257+01:00","created_by":"Claus Malter","updated_at":"2026-01-25T14:01:42.39961092+01:00","closed_at":"2026-01-25T14:01:42.39961092+01:00","close_reason":"Updated wrapper to check PATH, ~/.cargo/bin/, and ~/.local/bin/ for uv executable"}
{"id":"pokedex-f99","title":"Remove card_cache table - use only raw JSON","description":"BREAKING CHANGE: card_cache duplicates data in raw JSON files. Causes language confusion (cache stores one name but card exists in multiple languages). Remove cache_card(), get_cached_card(), and entire card_cache table. Impact: -250 LOC, 33% faster writes, no sync issues, fixes language bug.","notes":"URGENT: Migration broke pkm list command. Need to update get_cached_card() usages immediately.","status":"closed","priority":0,"issue_type":"task","owner":"3120297+cloonix@users.noreply.github.com","created_at":"2026-01-25T22:37:36.067015395+01:00","created_by":"Claus Malter","updated_at":"2026-01-25T22:45:55.350335156+01:00","closed_at":"2026-01-25T22:45:55.350335156+01:00","close_reason":"Closed","labels":["breaking-change","refactoring"],"dependencies":[{"issue_id":"pokedex-f99","depends_on_id":"pokedex-4q5","type":"blocks","created_at":"2026-01-25T22:37:40.98782074+01:00","created_by":"Claus Malter"},{"issue_id":"pokedex-f99","depends_on_id":"pokedex-cfw","type":"blocks","created_at":"2026-01-25T22:37:42.411381017+01:00","created_by":"Claus Malter"}]}
{"id":"pokedex-fat","title":"Extract language validation to constant","description":"Language validation set hardcoded in two places (lines 52-70, 343-355). Move to VALID_LANGUAGES constant in models.py. File: src/cli.py","status":"closed","priority":1,"issue_type":"chore","owner":"3120297+cloonix@users.noreply.github.com","estimated_minutes":10,"created_at":"2026-01-26T15:54:28.790361441+01:00","created_by":"Claus Malter","updated_at":"2026-01-26T15:56:06.132131463+01:00","closed_at":"2026-01-26T15:56:06.132131463+01:00","close_reason":"Closed","labels":["refactor","trivial"]}
{"id":"pokedex-fvn","title":"Commands: Update 'analyze' to use new schema","description":"Query DB instead of JSON. Update load_card_with_ownership(), use SQL WHERE for filtering. File: src/analyzer.py","status":"closed","priority":1,"issue_type":"task","owner":"3120297+cloonix@users.noreply.github.com","estimated_minutes":90,"created_at":"2026-01-26T12:14:03.922769739+01:00","created_by":"Claus Malter","updated_at":"2026-01-26T12:28:40.537417923+01:00","closed_at":"2026-01-26T12:28:40.537417923+01:00","close_reason":"Closed","labels":["analyze","commands","v2"],"dependencies":[{"issue_id":"pokedex-fvn","depends_on_id":"pokedex-e4d","type":"blocks","created_at":"2026-01-26T12:14:03.991737841+01:00","created_by":"Claus Malter"}]}
{"id":"pokedex-fze","title":"Add default language configuration option","description":"Add DEFAULT_LANG config option (default: de) to avoid typing language prefix for every card. Makes 'pkm add me01:136' default to German instead of requiring 'pkm add de:me01:136'.","status":"closed","priority":2,"issue_type":"feature","owner":"3120297+cloonix@users.noreply.github.com","estimated_minutes":30,"created_at":"2026-01-26T17:45:23.467584737+01:00","created_by":"Claus Malter","updated_at":"2026-01-26T17:49:24.703163736+01:00","closed_at":"2026-01-26T17:49:24.703163736+01:00","close_reason":"Reverted: feature was overcomplicating the card input parsing logic. Existing lang:set:card format is sufficient.","labels":["config","enhancement"]}
{"id":"pokedex-gzo","title":"Rarity column should use English terms instead of translated terms","status":"closed","priority":1,"issue_type":"bug","owner":"3120297+cloonix@users.noreply.github.com","created_at":"2026-01-25T13:50:06.303281715+01:00","created_by":"Claus Malter","updated_at":"2026-01-25T13:51:47.720116282+01:00","closed_at":"2026-01-25T13:51:47.720116282+01:00","close_reason":"Rarity now always fetched from English API regardless of card language. Tested with German, French, and English cards."}
{"id":"pokedex-h6f","title":"Docs: Update DESIGN.md for new architecture","description":"- **Type**: task","status":"tombstone","priority":2,"issue_type":"task","created_at":"2026-01-26T12:10:37.81328572+01:00","updated_at":"2026-01-26T12:12:07.085967935+01:00","deleted_at":"2026-01-26T12:12:07.085967935+01:00","deleted_by":"batch delete","delete_reason":"batch delete","original_type":"task"}
{"id":"pokedex-igv","title":"Docs: Update README.md with sync command","description":"- **Type**: task","status":"tombstone","priority":2,"issue_type":"task","created_at":"2026-01-26T12:10:37.817430566+01:00","updated_at":"2026-01-26T12:12:07.044339911+01:00","deleted_at":"2026-01-26T12:12:07.044339911+01:00","deleted_by":"batch delete","delete_reason":"batch delete","original_type":"task"}
{"id":"pokedex-jq0","title":"Phase 7: Documentation (Depends on Implementation)","status":"tombstone","priority":2,"issue_type":"task","created_at":"2026-01-26T12:13:28.497355645+01:00","updated_at":"2026-01-26T12:13:46.137882838+01:00","deleted_at":"2026-01-26T12:13:46.137882838+01:00","deleted_by":"batch delete","delete_reason":"batch delete","original_type":"task"}
{"id":"pokedex-jxh","title":"Extract card name retrieval helper","description":"Duplicate card name logic in handle_rm() (lines 260-266, 301-307). Create get_display_name() helper. File: src/cli.py","status":"closed","priority":2,"issue_type":"chore","owner":"3120297+cloonix@users.noreply.github.com","estimated_minutes":20,"created_at":"2026-01-26T15:54:37.940559392+01:00","created_by":"Claus Malter","updated_at":"2026-01-26T17:05:12.665663204+01:00","closed_at":"2026-01-26T17:05:12.665663204+01:00","close_reason":"Closed","labels":["easy","refactor"]}
{"id":"pokedex-k4w","title":"Design: Document new database schema for Option B","description":"- **Type**: task","status":"tombstone","priority":0,"issue_type":"task","created_at":"2026-01-26T12:10:37.708825317+01:00","updated_at":"2026-01-26T12:12:06.89978026+01:00","deleted_at":"2026-01-26T12:12:06.89978026+01:00","deleted_by":"batch delete","delete_reason":"batch delete","original_type":"task"}
{"id":"pokedex-le4","title":"Extract JSON loading helper for migration","description":"Duplicate try/except for JSON loading (6 places in migrate_v2.py). Create load_json_file() helper. File: src/migrate_v2.py","status":"closed","priority":3,"issue_type":"chore","owner":"3120297+cloonix@users.noreply.github.com","estimated_minutes":25,"created_at":"2026-01-26T15:54:43.341938054+01:00","created_by":"Claus Malter","updated_at":"2026-01-26T17:20:15.837110823+01:00","closed_at":"2026-01-26T17:20:15.837110823+01:00","close_reason":"No longer relevant - migration script only has 2 JSON loads with different contexts","labels":["easy","refactor"]}
{"id":"pokedex-lgg","title":"Commands: Update 'list' to query new schema","description":"- **Type**: task","status":"tombstone","priority":0,"issue_type":"task","created_at":"2026-01-26T12:10:37.733366708+01:00","updated_at":"2026-01-26T12:12:06.739840196+01:00","deleted_at":"2026-01-26T12:12:06.739840196+01:00","deleted_by":"batch delete","delete_reason":"batch delete","original_type":"task"}
{"id":"pokedex-lwd","title":"Add row_to_dict() database helper functions","description":"Repetitive pattern: columns = [desc[0] for desc in cursor.description] + dict(zip(columns, row)) appears in db.py at lines 268-269, 285-286, 492-493 and more. Extract helper functions.","status":"closed","priority":2,"issue_type":"task","owner":"3120297+cloonix@users.noreply.github.com","created_at":"2026-01-26T17:52:48.232790139+01:00","created_by":"Claus Malter","updated_at":"2026-01-26T18:05:55.372354441+01:00","closed_at":"2026-01-26T18:05:55.372354441+01:00","close_reason":"Closed","labels":["refactor"]}
{"id":"pokedex-n6m","title":"Extract get_current_quantity() helper function","description":"Duplicate card lookup logic in cli.py lines 207-216 and 279-287. Extract common helper function.","status":"closed","priority":2,"issue_type":"task","owner":"3120297+cloonix@users.noreply.github.com","created_at":"2026-01-26T17:52:44.418469316+01:00","created_by":"Claus Malter","updated_at":"2026-01-26T18:01:12.134237865+01:00","closed_at":"2026-01-26T18:01:12.134237865+01:00","close_reason":"Closed","labels":["refactor"]}
{"id":"pokedex-o5w","title":"Commands: Update 'rm' to work with new schema","description":"Use new remove_owned_card() function. Test cascade deletes. File: src/cli.py","status":"closed","priority":2,"issue_type":"task","owner":"3120297+cloonix@users.noreply.github.com","estimated_minutes":45,"created_at":"2026-01-26T12:14:04.049769941+01:00","created_by":"Claus Malter","updated_at":"2026-01-26T12:26:08.157402744+01:00","closed_at":"2026-01-26T12:26:08.157402744+01:00","close_reason":"Closed","labels":["commands","rm","v2"],"dependencies":[{"issue_id":"pokedex-o5w","depends_on_id":"pokedex-e4d","type":"blocks","created_at":"2026-01-26T12:14:04.093146592+01:00","created_by":"Claus Malter"}]}
{"id":"pokedex-p34","title":"Tests: Update all tests for new schema","description":"- **Type**: task","status":"tombstone","priority":2,"issue_type":"task","created_at":"2026-01-26T12:10:37.796360774+01:00","updated_at":"2026-01-26T12:12:07.192576987+01:00","deleted_at":"2026-01-26T12:12:07.192576987+01:00","deleted_by":"batch delete","delete_reason":"batch delete","original_type":"task"}
{"id":"pokedex-q8m","title":"Database: Add helper functions for new tables","description":"- **Type**: task","status":"tombstone","priority":0,"issue_type":"task","created_at":"2026-01-26T12:10:37.720845783+01:00","updated_at":"2026-01-26T12:12:06.816019757+01:00","deleted_at":"2026-01-26T12:12:06.816019757+01:00","deleted_by":"batch delete","delete_reason":"batch delete","original_type":"task"}
{"id":"pokedex-r60","title":"Commands: Implement new 'sync' command","description":"New command: pkm sync [--stale N] [--prices] [--show-changes]. Refresh card data from API. File: src/cli.py","status":"closed","priority":1,"issue_type":"task","owner":"3120297+cloonix@users.noreply.github.com","estimated_minutes":120,"created_at":"2026-01-26T12:14:04.218762968+01:00","created_by":"Claus Malter","updated_at":"2026-01-26T12:30:00.486541557+01:00","closed_at":"2026-01-26T12:30:00.486541557+01:00","close_reason":"Closed","labels":["commands","feature","sync","v2"],"dependencies":[{"issue_id":"pokedex-r60","depends_on_id":"pokedex-e4d","type":"blocks","created_at":"2026-01-26T12:14:04.261379357+01:00","created_by":"Claus Malter"}]}
{"id":"pokedex-rcp","title":"Commands: Update 'analyze' to use new schema","description":"- **Type**: task","status":"tombstone","priority":2,"issue_type":"task","created_at":"2026-01-26T12:10:37.761411937+01:00","updated_at":"2026-01-26T12:12:07.347047483+01:00","deleted_at":"2026-01-26T12:12:07.347047483+01:00","deleted_by":"batch delete","delete_reason":"batch delete","original_type":"task"}
{"id":"pokedex-spp","title":"Phase 1: Foundation (No Dependencies)","status":"tombstone","priority":2,"issue_type":"task","created_at":"2026-01-26T12:13:28.479530148+01:00","updated_at":"2026-01-26T12:13:46.137882838+01:00","deleted_at":"2026-01-26T12:13:46.137882838+01:00","deleted_by":"batch delete","delete_reason":"batch delete","original_type":"task"}
{"id":"pokedex-udo","title":"Docs: Update DESIGN.md for new architecture","description":"Update DESIGN.md: 3-table schema, sync strategy, price tracking, migration guide. Remove JSON docs.","status":"closed","priority":2,"issue_type":"task","owner":"3120297+cloonix@users.noreply.github.com","estimated_minutes":60,"created_at":"2026-01-26T12:14:21.015109321+01:00","created_by":"Claus Malter","updated_at":"2026-01-26T14:25:10.651902197+01:00","closed_at":"2026-01-26T14:25:10.651902197+01:00","close_reason":"Partial: Added migration warning banner. Full update deferred (712 lines, needs comprehensive rewrite)","labels":["documentation","v2"],"dependencies":[{"issue_id":"pokedex-udo","depends_on_id":"pokedex-4hg","type":"blocks","created_at":"2026-01-26T12:14:21.057664647+01:00","created_by":"Claus Malter"},{"issue_id":"pokedex-udo","depends_on_id":"pokedex-r60","type":"blocks","created_at":"2026-01-26T12:14:21.099363734+01:00","created_by":"Claus Malter"}]}
{"id":"pokedex-uqe","title":"Add curl-based installation script","status":"closed","priority":0,"issue_type":"feature","owner":"3120297+cloonix@users.noreply.github.com","created_at":"2026-01-25T13:52:05.304482335+01:00","created_by":"Claus Malter","updated_at":"2026-01-25T13:56:02.720331574+01:00","closed_at":"2026-01-25T13:56:02.720331574+01:00","close_reason":"Installation script complete with curl-based install, auto-update, uninstall, and README documentation. Tested successfully."}
{"id":"pokedex-w5l","title":"Commands: Update 'add' to use new schema","description":"Rewrite handle_add() for 3-table schema. Fetch EN+localized, store in cards+card_names+owned_cards. Remove JSON logic. File: src/cli.py","status":"closed","priority":0,"issue_type":"task","owner":"3120297+cloonix@users.noreply.github.com","estimated_minutes":90,"created_at":"2026-01-26T12:14:03.749500753+01:00","created_by":"Claus Malter","updated_at":"2026-01-26T12:24:28.740345014+01:00","closed_at":"2026-01-26T12:24:28.740345014+01:00","close_reason":"Closed","labels":["add","commands","v2"],"dependencies":[{"issue_id":"pokedex-w5l","depends_on_id":"pokedex-e4d","type":"blocks","created_at":"2026-01-26T12:14:03.789416885+01:00","created_by":"Claus Malter"}]}
{"id":"pokedex-xiz","title":"Extract English rarity fetching in api.py","description":"Duplicate logic in get_card() and get_card_by_id() (lines 56-71, 97-113). Extract to _fetch_english_rarity(). File: src/api.py","status":"closed","priority":2,"issue_type":"chore","owner":"3120297+cloonix@users.noreply.github.com","estimated_minutes":20,"created_at":"2026-01-26T15:54:39.868751187+01:00","created_by":"Claus Malter","updated_at":"2026-01-26T17:06:28.662104818+01:00","closed_at":"2026-01-26T17:06:28.662104818+01:00","close_reason":"Closed","labels":["easy","refactor"]}
{"id":"pokedex-yzv","title":"Phase 2: Database Implementation (Depends on Design)","status":"tombstone","priority":2,"issue_type":"task","created_at":"2026-01-26T12:13:28.482122786+01:00","updated_at":"2026-01-26T12:13:46.137882838+01:00","deleted_at":"2026-01-26T12:13:46.137882838+01:00","deleted_by":"batch delete","delete_reason":"batch delete","original_type":"task"}
